<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Network Scan (Frontend Only) | Topology Viewer</title>

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:"Poppins",sans-serif;}
body{background:#06121f;color:white;}

/* Navbar */
nav{
  height:60px;background:#0b1f33;
  display:flex;justify-content:space-between;align-items:center;
  padding:0 25px;border-bottom:2px solid #19d5ff55;
}
nav .brand{color:#19d5ff;font-size:22px;font-weight:600;}
nav button{
  background:#19d5ff;color:#001a2a;border:none;padding:9px 16px;
  border-radius:6px;font-weight:600;cursor:pointer;transition:.3s;
}
nav button:hover{background:#47eaff;}

/* Layout */
.wrapper{padding:25px;display:flex;flex-direction:column;gap:20px;}

/* Scan Controls */
.scan-controls{display:flex;gap:15px;}
.btn{
  padding:10px 18px;border:none;border-radius:6px;
  font-weight:600;font-size:15px;cursor:pointer;transition:.3s;
}
.single{background:#19d5ff;color:#001727;}
.single:hover{background:#47eaff;}
.continuous{background:#ffaa00;color:#001727;}
.continuous:hover{background:#ffc24d;}
.stop{background:#ff5555;color:white;}
.stop:hover{background:#ff7777;}

/* Topology Viewer */
.topology{
  background:#0a1933;border:1px solid #19d5ff33;
  height:350px;border-radius:12px;padding:20px;
  position:relative;overflow:hidden;
}

/* device node */
.device{
  width:65px;height:65px;border-radius:50%;
  background:#19d5ff;color:#011827;
  font-weight:700;display:flex;justify-content:center;
  align-items:center;position:absolute;cursor:pointer;
  transition:.3s;text-align:center;
}
.device:hover{
  transform:scale(1.1);
  box-shadow:0 0 15px #00eaffaa;
}

/* IP tooltip */
.tooltip{
  position:absolute;background:#000c;padding:6px 10px;
  border-radius:6px;font-size:13px;border:1px solid #19d5ff;
  display:none;color:#fff;white-space:nowrap;
}

/* lines between devices */
.connection{
  position:absolute;height:3px;background:#19d5ff55;
  transform-origin:0 50%;
}

/* Device List Panel */
.device-list{
  background:#0a1933;border:1px solid #19d5ff33;
  border-radius:12px;padding:15px;
  display:flex;flex-wrap:wrap;gap:15px;
}
.device-box{
  width:180px;background:#112542;padding:10px;
  border-radius:10px;border:1px solid #19d5ff33;transition:.3s;
}
.device-box:hover{
  border-color:#19d5ff;
  box-shadow:0 0 6px #19d5ff77;
  cursor:pointer;
}
.selected{background:#00eaff;color:#001a2a;border-color:#00eaff;}
</style>
</head>
<body>

<nav>
  <span class="brand">Network Scan</span>
  <button onclick="location.href='dashboard.html'">Home</button>
</nav>

<div class="wrapper">

  <!-- Scan Buttons -->
  <div class="scan-controls">
    <button class="btn single" onclick="singleScan()">Single Scan</button>
    <button class="btn continuous" onclick="startContinuous()">Continuous Scan</button>
    <button class="btn stop" onclick="stopContinuous()">Stop Scan</button>
  </div>

  <!-- Topology Viewer -->
  <div class="topology" id="topology"></div>

  <!-- Device List -->
  <h3 style="color:#19d5ff;">Detected Devices</h3>
  <div class="device-list" id="deviceList"></div>

</div>

<script>
let interval;
let scanning=false;

/* Mock device generator (randomized for demo) */
function generateDevices(){
  const names=["PC1","PC2","PC3","Laptop","Router","Switch","Server"];
  const ips=["192.168.1.2","192.168.1.3","192.168.1.4","192.168.1.5","192.168.1.1","192.168.1.10","192.168.1.11"];

  return names.map((n,i)=>({
    id:n,
    ip:ips[i],
    x:Math.random()*600,
    y:Math.random()*250
  }));
}

/* Render Topology */
function renderTopology(devices){
  const box=document.getElementById("topology");
  box.innerHTML="";

  devices.forEach(dev=>{
    const node=document.createElement("div");
    node.className="device";
    node.style.left=dev.x+"px";
    node.style.top =dev.y+"px";
    node.textContent=dev.id;

    const tip=document.createElement("div");
    tip.className="tooltip";
    tip.textContent=dev.ip;
    box.appendChild(tip);

    node.onmouseenter=()=>{
      tip.style.display="block";
      tip.style.left=(dev.x+70)+"px";
      tip.style.top =(dev.y)+"px";
    };
    node.onmouseleave=()=>tip.style.display="none";
    node.onclick=()=>highlight(devices,dev.id);

    box.appendChild(node);
  });

  /* draw basic connections */
  for(let i=0;i<devices.length-1;i++){
    connect(devices[i], devices[i+1], box);
  }
}

function connect(a,b,parent){
  const dx=b.x-a.x, dy=b.y-a.y;
  const length=Math.sqrt(dx*dx+dy*dy);
  const angle=Math.atan2(dy,dx)*180/Math.PI;

  const line=document.createElement("div");
  line.className="connection";
  line.style.width=length+"px";
  line.style.left=(a.x+32)+"px";
  line.style.top =(a.y+32)+"px";
  line.style.transform=`rotate(${angle}deg)`;
  parent.appendChild(line);
}

/* Device List Panel */
function renderList(devices){
  const list=document.getElementById("deviceList");
  list.innerHTML="";
  devices.forEach(dev=>{
    const box=document.createElement("div");
    box.className="device-box";
    box.id="box-"+dev.id;
    box.innerHTML=`<b>${dev.id}</b><br>${dev.ip}`;
    box.onclick=()=>highlight(devices,dev.id);
    list.appendChild(box);
  });
}

/* Highlight selected device */
function highlight(devices,id){
  document.querySelectorAll(".device-box").forEach(b=>b.classList.remove("selected"));
  document.getElementById("box-"+id).classList.add("selected");
}

/* Scan modes (simulated) */
function singleScan(){
  const dev=generateDevices();
  renderTopology(dev);
  renderList(dev);
}
function startContinuous(){
  if(scanning) return;
  scanning=true;
  interval=setInterval(()=>singleScan(),2000);
}
function stopContinuous(){
  scanning=false;clearInterval(interval);
}

/* initial UI load */
singleScan();
</script>

</body>
</html>
