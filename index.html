<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Network Topology Visualization | Login</title>

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:"Poppins",sans-serif;}

body{
  background:url("bg.jpg") no-repeat center center/cover;
  height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
  color:white;
}

/* Card UI */
.card{
  width:350px;
  background:rgba(0,0,0,0.60);
  padding:30px;
  border-radius:12px;
  border:1px solid #19d5ff77;
  box-shadow:0 0 20px #19d5ff55;
  backdrop-filter:blur(6px);
}

h2{
  text-align:center;
  color:#19d5ff;
  margin-bottom:15px;
}

input,button{
  width:100%;
  padding:12px;
  margin-top:12px;
  border-radius:8px;
  font-size:15px;
  border:none;
  outline:none;
}

input{
  background:rgba(255,255,255,0.15);
  color:#e0f7ff;
  border:1px solid #0e2d4b;
}
input:focus{
  border-color:#19d5ff;
  box-shadow:0 0 4px #19d5ff;
}

button{
  background:#19d5ff;
  color:#001727;
  font-weight:600;
  cursor:pointer;
}
button:hover{background:#47eaff;}

.link{
  text-align:center;
  margin-top:10px;
}
.link a{
  color:#8bdcff;
  text-decoration:none;
  font-size:14px;
}
.link a:hover{
  color:white;
  text-decoration:underline;
}

.error{
  color:#ff6b6b;
  font-size:14px;
  margin-top:8px;
  text-align:center;
}
</style>
</head>

<body>

<div class="card">

<!-- LOGIN -->
<div id="loginBox">
  <h2>Login</h2>

  <input type="text" id="loginUser" placeholder="Username">
  <input type="password" id="loginPass" placeholder="Password">
  <button onclick="login()">Login</button>

  <div id="loginError" class="error"></div>

  <div class="link">
    <a href="javascript:void(0)" onclick="showForgot()">Forgot Password?</a><br>
    <a href="javascript:void(0)" onclick="showSignup()">New user? Sign Up</a>
  </div>
</div>

<!-- SIGN UP -->
<div id="signupBox" style="display:none;">
  <h2>Sign Up</h2>

  <input type="text" id="suUser" placeholder="Username">
  <input type="password" id="suPass" placeholder="Password">
  <input type="password" id="suConfirm" placeholder="Confirm Password">

  <button onclick="signup()">Create Account</button>

  <div id="signupError" class="error"></div>

  <div class="link">
    <a href="javascript:void(0)" onclick="showLogin()">← Back to Login</a>
  </div>
</div>

<!-- FORGOT PASSWORD -->
<div id="forgotBox" style="display:none;">
  <h2>Reset Password</h2>

  <input type="text" id="fpUser" placeholder="Username">
  <input type="password" id="fpPass" placeholder="New Password">
  <input type="password" id="fpConfirm" placeholder="Confirm Password">

  <button onclick="resetPassword()">Set Password</button>

  <div id="fpError" class="error"></div>

  <div class="link">
    <a href="javascript:void(0)" onclick="showLogin()">← Back to Login</a>
  </div>
</div>

</div>

<script>
/* COMMON USER (DEFAULT) */
let COMMON_USER = JSON.parse(localStorage.getItem("user")) || {
  username:"networkadmin",
  password:"topology123"
};

/* UI HELPERS */
function hideAll(){
  loginBox.style.display="none";
  signupBox.style.display="none";
  forgotBox.style.display="none";
}
function showLogin(){ hideAll(); loginBox.style.display="block"; }
function showSignup(){ hideAll(); signupBox.style.display="block"; }
function showForgot(){ hideAll(); forgotBox.style.display="block"; }

/* LOGIN */
function login(){
  const u = loginUser.value.trim();
  const p = loginPass.value.trim();

  if(u===COMMON_USER.username && p===COMMON_USER.password){
    sessionStorage.setItem("authUser",u);
    window.location.href="dashboard.html";
  }else{
    loginError.textContent="Invalid username or password!";
  }
}

/* SIGN UP */
function signup(){
  if(suUser.value===""||suPass.value===""||suConfirm.value===""){
    signupError.textContent="Fill all fields!";
    return;
  }
  if(suPass.value!==suConfirm.value){
    signupError.textContent="Passwords do not match!";
    return;
  }

  COMMON_USER={
    username:suUser.value,
    password:suPass.value
  };
  localStorage.setItem("user",JSON.stringify(COMMON_USER));
  alert("Account created!");
  showLogin();
}

/* FORGOT PASSWORD */
function resetPassword(){
  if(fpUser.value!==COMMON_USER.username){
    fpError.textContent="User not found!";
    return;
  }
  if(fpPass.value!==fpConfirm.value){
    fpError.textContent="Passwords do not match!";
    return;
  }

  COMMON_USER.password=fpPass.value;
  localStorage.setItem("user",JSON.stringify(COMMON_USER));
  alert("Password reset successful!");
  showLogin();
}

/* ALWAYS RESET TO LOGIN ON LOAD */
window.onload=showLogin;
</script>

</body>
</html>
